<?xml version="1.0" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><p>&#xA0;&#xD;
</p><div class="square-box">&#xD;
<h2>What is MongoDB?</h2>&#xD;
MongoDB is a free document database management system that offers high scalability, availability, and flexibility. It stores data in&#xC2;&#xA0; JSON-like documents, which means fields can vary from document to document and data structure can be changed over time. [<a href="https://www.mongodb.com/what-is-mongodb">source</a>]&#xD;
&#xD;
</div>&#xD;
&#xA0;&#xD;
<h3>MongoDB Key Features [1,2]</h3>&#xD;
<span style="text-decoration: underline;"><strong>Document DBs</strong></span>&#xD;
<p style="padding-left: 60px;">A record in MongoDB is a document, which is a data structure composed of field and value pairs. MongoDB documents are similar to JSON objects. The values of fields may include other documents, arrays, and arrays of documents. The following example shows a document (i.e. object) with five fields.</p>&#xD;
&#xD;
<pre class="EnlighterJSRAW" style="padding-left: 90px;" data-enlighter-language="js">{&#xD;
    name:'Tim',&#xD;
    age:26,&#xD;
    unit:'FIT2095',&#xD;
    grade:'HD',&#xD;
    mark:92.5,&#xD;
    prerequisites:['FIT1051','FIT2081']&#xD;
}</pre>&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>High Performance</strong></span>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>High Availability</strong></span>&#xD;
<p style="padding-left: 60px;">MongoDB&#xE2;&#x80;&#x99;s replication facility, called a replica set, provides:</p>&#xD;
<p style="padding-left: 90px;">-&#xC2;&#xA0;automatic failover and</p>&#xD;
<p style="padding-left: 90px;">- data redundancy.</p>&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>Horizontal Scalability</strong></span>&#xD;
<p style="padding-left: 30px;">MongoDB provides horizontal scalability as part of its core functionality:</p>&#xD;
<p style="padding-left: 90px;">- Sharding distributes data across a cluster of machines.</p>&#xD;
<p style="padding-left: 90px;">- Supports creating zones of data based on the shard key.</p>&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>Indexing</strong></span>&#xD;
<p style="padding-left: 30px;">You can index any field in a document.</p>&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>Supports Ad-Hoc Queries</strong></span>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
<span style="text-decoration: underline;"><strong>Rich Query Language</strong></span>&#xD;
&#xD;
&#xA0;&#xD;
<h2>Terminology and Concepts</h2>&#xD;
Many concepts in relational database systems have close analogs in MongoDB. The table below outlines the common concepts:&#xD;
&#xD;
&#xA0;&#xD;
<table style="width: 452.27px;"><tbody><tr><td style="width: 207px; text-align: center;">SQL</td>&#xD;
<td style="width: 245.27px; text-align: center;">MongoDB</td>&#xD;
</tr><tr><td style="width: 207px;">Database</td>&#xD;
<td style="width: 245.27px;">Database</td>&#xD;
</tr><tr><td style="width: 207px;">Table</td>&#xD;
<td style="width: 245.27px;">Collection</td>&#xD;
</tr><tr><td style="width: 207px;">Index</td>&#xD;
<td style="width: 245.27px;">Index</td>&#xD;
</tr><tr><td style="width: 207px;">Row</td>&#xD;
<td style="width: 245.27px;">Document</td>&#xD;
</tr><tr><td style="width: 207px;">Column</td>&#xD;
<td style="width: 245.27px;">Field</td>&#xD;
</tr></tbody></table>&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
&#xD;
If you are a veteran SQL developer, this link&#xC2;&#xA0;compares between SQL and MongoDB in more details:&#xC2;&#xA0;<a href="https://docs.mongodb.com/manual/reference/sql-comparison/">https://docs.mongodb.com/manual/reference/sql-comparison/</a>&#xD;
&#xD;
</div>&#xD;
&#xA0;&#xD;
<h2>Documents and Collections in MongoDB [2]</h2>&#xD;
<ul><li>MongoDB is a document database, which means that the equivalent of a record is a document or an object.</li>&#xD;
 	<li>A document is a data structure composed of field and value pairs.</li>&#xD;
 	<li>The values of fields may include other documents, arrays, and arrays of documents.</li>&#xD;
 	<li>MongoDB documents are similar to JSON objects.</li>&#xD;
 	<li>Compared to a JSON object, a MongoDB document has support not only for the primitive data types boolean, numbers, and strings, but also other common data types such as dates, timestamps, regular expressions, and binary data.</li>&#xD;
 	<li>A collection is like a table in a relational database. It is a set of documents, and you access each document via the collection.</li>&#xD;
 	<li>In MongoDB, you can have a primary key and indexes on the collection.</li>&#xD;
 	<li>A primary key is mandated in MongoDB, and it has the reserved field name _id.</li>&#xD;
 	<li>MongoDB creates the __id and auto-generates a unique key for every document if it is not supplied.</li>&#xD;
 	<li>MongoDB does not require to define a schema for a collection.</li>&#xD;
 	<li>The only requirement is that all documents in a collection must have a unique _id, but the actual documents may have completely different fields.</li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
&#xD;
<strong>Question</strong>: Is there any software to visualize, edit, and engineer MongoDB data?&#xD;
&#xD;
<strong>Answer</strong>: YES. <a href="https://www.mongodb.com/products/compass">Compass</a>.&#xC2;&#xA0;The GUI for MongoDB&#xD;
&#xD;
</div>&#xD;
Compass Key Features [3]:&#xD;
<ul><li>Visually explore your data.</li>&#xD;
 	<li>Run ad hoc queries in seconds.</li>&#xD;
 	<li>Interact with your data with full CRUD functionality.</li>&#xD;
 	<li>View and optimize your query performance.</li>&#xD;
 	<li>Available on Linux, Mac, or Windows.</li>&#xD;
 	<li>Compass empowers you to make smarter decisions about indexing, document validation, and more.</li>&#xD;
</ul><div class="square-box">&#xD;
&#xD;
How to get it?&#xD;
&#xD;
You can download it from&#xC2;&#xA0;<a href="https://www.mongodb.com/download-center/compass">https://www.mongodb.com/download-center/compass</a>&#xD;
&#xD;
</div>&#xD;
How to use it?&#xD;
<ul><li>After you run MongoDB Compass Community App, the connect to host window appears:</li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
<p style="padding-left: 60px;"><a href="https://www.alexandriarepository.org/media/compass_c2h" rel="attachment wp-att-160767"><img class="alignnone wp-image-160767" src="./assets/compass_c2h.png" alt="" width="674" height="444"/></a></p>&#xD;
&#xA0;&#xD;
<ul><li>keep the default values for all fields and click on CONNECT. The main dashboard window appears.</li>&#xD;
</ul><p style="padding-left: 60px;"><a href="https://www.alexandriarepository.org/media/compass_main" rel="attachment wp-att-160768"><img class="alignnone wp-image-160768" src="./assets/compass_main.png" alt="" width="702" height="363"/></a></p>&#xD;
&#xD;
<ul><li>Click on your database to get the list of collections window.</li>&#xD;
</ul><p style="padding-left: 60px;"><a href="https://www.alexandriarepository.org/media/compass_coll" rel="attachment wp-att-160769"><img class="alignnone wp-image-160769" src="./assets/compass_coll.png" alt="" width="704" height="322"/></a></p>&#xD;
&#xD;
<ul><li>Click on the collection name to get its documents</li>&#xD;
</ul><p style="padding-left: 60px;"><a href="https://www.alexandriarepository.org/media/compass_table" rel="attachment wp-att-160770"><img class="alignnone wp-image-160770" src="./assets/compass_table.png" alt="" width="794" height="392"/></a></p>&#xD;
&#xA0;&#xD;
<blockquote>Notes:&#xD;
<ul><li>Collections and documents will be added in the next sections via Node.js</li>&#xD;
 	<li>You might need to manually refresh Compass after each operation in order to see the effects</li>&#xD;
</ul></blockquote>&#xD;
&#xA0;&#xD;
&#xD;
<hr/><h1><strong>MongoDB CRUD operations</strong></h1>&#xD;
In this section, we will demonstrate how to integrate MongoDB into a Node.js app and how to perform the four CURD operations: Create, Update, Retrieve, and Delete.&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Install MongoDB package (driver):&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">npm install mongodb --save</pre>&#xD;
&#xA0;&#xD;
&#xD;
get an instance of MongoDB:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">const mongodb = require('mongodb');</pre>&#xD;
&#xA0;&#xD;
&#xD;
reference MongoDB client:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">const MongoClient = mongodb.MongoClient;</pre>&#xD;
&#xA0;&#xD;
&#xD;
the URL to the MongoDB&#xC2;&#xA0;server:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">const url = 'mongodb://localhost:27017/';&#xD;
</pre>&#xD;
&#xA0;&#xD;
&#xD;
Now let's connect our app to MongoDB server:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">MongoClient.connect(url, {useNewUrlParser: true}, function (err, client) {&#xD;
    if (err) {&#xD;
        console.log('Err  ', err);&#xD;
    } else {&#xD;
        console.log("Connected successfully to server");&#xD;
        db = client.db('fi2095table');&#xD;
    }&#xD;
});</pre>&#xD;
&#xA0;&#xD;
<ul><li>The first parameter is the server's URL, which is a local server listening at port 27017 (MongoDB default port)</li>&#xD;
 	<li>The second parameter is an object that is required&#xC2;&#xA0;for the latest version of MongoDB (version &gt;4/0)</li>&#xD;
 	<li>The third parameter is a callback function that will get executed after the connect operation finishes. It has two parameters: <strong>err&#xC2;&#xA0;</strong>object that gets value if an error occurs and <strong>client</strong> which is used later to access the database as shown in line 6 that connects to a database&#xC2;&#xA0;named 'fit2095db'.</li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
<h2>Insert Documents</h2>&#xD;
To insert a new document into the collection, we need a reference to the collection:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection('week5table')</pre>&#xD;
The above statement references a collection named 'week5table'. The statement creates the collection if it does not exist.&#xD;
&#xD;
Now, let's insert a document that has one property {name:'Tim'}&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection('week5table').insertOne({name: 'Tim'});</pre>&#xD;
&#xA0;&#xD;
&#xD;
Let's check our&#xC2;&#xA0;document in Compass:&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/compass11" rel="attachment wp-att-160709"><img class="alignnone size-full wp-image-160709" style="border: solid black 1px;" src="./assets/compass11.png" alt="" width="902" height="357"/></a>&#xD;
<blockquote>NOTE: the field _id is generated&#xC2;&#xA0;automatically by MongoDB!!</blockquote>&#xD;
&#xA0;&#xD;
&#xD;
You can also insert several documents at once using <strong>inserMany&#xC2;&#xA0;</strong>function&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection('week5table').insertMany([&#xD;
    { name: 'Alex', age: 25 },&#xD;
    { name: 'John', age: 34 },&#xD;
    { name: 'Max', age: 26 }&#xD;
]);</pre>&#xD;
where the input to the insertMany function is an array of objects.&#xD;
&#xD;
Now, our collection:&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/compass2" rel="attachment wp-att-160710"><img class="alignnone size-full wp-image-160710" style="border: solid 1px;" src="./assets/compass2.png" alt="" width="912" height="448"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
<h2>Retrieve Documents</h2>&#xD;
<h3><a href="https://docs.mongodb.com/manual/reference/method/db.collection.findOne/">findOne</a></h3>&#xD;
The function findOne() returns one document that satisfies the specified query criteria on the collection. If multiple documents satisfy the query, this method returns the first document according to the natural order which reflects the order of documents on the disk.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").findOne({ name: "Tim" }, function (err, result) {&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
The above statement returns the first document it finds that has name='Tim'.&#xD;
<h3><a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/">find()</a></h3>&#xD;
The <strong>find()</strong> method returns all occurrences in the selection.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").find({}).toArray(function (err, result) {&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
The output should be:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">[ { _id: 5b7644cd844cf717ec049e0d, name: 'Tim', age: 24 },&#xD;
  { _id: 5b76453b8d1d62357cd13bee, name: 'Alex', age: 25 },&#xD;
  { _id: 5b76453b8d1d62357cd13bef, name: 'John', age: 34 },&#xD;
  { _id: 5b76453b8d1d62357cd13bf0, name: 'Max', age: 26 } ]</pre>&#xD;
&#xA0;&#xD;
<h3>Query the database</h3>&#xD;
In order to filter the result of find() method, a query (i.e. criteria)object should be used.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { name: 'Alex' };&#xD;
db.collection("week5table").find(query).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
We can also use Regular&#xC2;&#xA0;Expressions in the query object:&#xD;
&#xD;
For example, get all the documents where the name starts with 'T':&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { name: /^T/ };&#xD;
db.collection("week5table").find(query).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
and the output:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">[ { _id: 5b7644cd844cf717ec049e0d, name: 'Tim', age: 24 } ]</pre>&#xD;
&#xA0;&#xD;
&#xD;
Finds all the documents where the name&#xC2;&#xA0;ends with 'x':&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { name: /x$/ };&#xD;
db.collection("week5table").find(query).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
and the output:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">[ { _id: 5b76453b8d1d62357cd13bee, name: 'Alex', age: 25 },&#xD;
  { _id: 5b76453b8d1d62357cd13bf0, name: 'Max', age: 26 } ]</pre>&#xD;
&#xA0;&#xD;
<h3>Comparison Expression Operators</h3>&#xD;
The comparison expressions take two argument expressions and compare both value and type.&#xD;
<div class="square-box">&#xD;
<h4><strong>Syntax&#xC2;&#xA0;</strong></h4>&#xD;
{ &lt;field&gt;: { Operator: &lt;value&gt; } }&#xD;
&#xD;
</div>&#xD;
For example, to return all the documents that have an&#xC2;&#xA0;<strong>age</strong> greater than or equal to 25:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { age: { $gte: 25 } };&#xD;
db.collection("week5table").find(query).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
The list of Operators&#xD;
<table style="width: 1541.2px;"><tbody><tr><td style="width: 136px;">Operators</td>&#xD;
<td style="width: 1403.2px;">Description</td>&#xD;
</tr><tr><td style="width: 136px;">$CMP</td>&#xD;
<td style="width: 1403.2px;">RETURNS&#xC2;&#xA0;0&#xC2;&#xA0;IF THE TWO VALUES ARE EQUIVALENT,&#xC2;&#xA0;1&#xC2;&#xA0;IF THE FIRST VALUE IS GREATER THAN THE SECOND, AND&#xC2;&#xA0;-1&#xC2;&#xA0;IF THE FIRST VALUE IS LESS THAN THE SECOND.</td>&#xD;
</tr><tr><td style="width: 136px;">$eq</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the values are equivalent.</td>&#xD;
</tr><tr><td style="width: 136px;">$gt</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the first value is greater than the second.</td>&#xD;
</tr><tr><td style="width: 136px;">$gte</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the first value is greater than or equal to the second.</td>&#xD;
</tr><tr><td style="width: 136px;">$lt</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the first value is less than the second.</td>&#xD;
</tr><tr><td style="width: 136px;">$lte</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the first value is less than or equal to the second.</td>&#xD;
</tr><tr><td style="width: 136px;">$ne</td>&#xD;
<td style="width: 1403.2px;">Returns&#xC2;&#xA0;true&#xC2;&#xA0;if the values are&#xC2;&#xA0;not&#xC2;&#xA0;equivalent.</td>&#xD;
</tr></tbody></table>&#xD;
&#xA0;&#xD;
<h3>Sorting the result</h3>&#xD;
The sort() method can be used&#xC2;&#xA0;to sort the result in ascending or descending order.&#xD;
&#xD;
The sort parameter contains field and value pairs, in the following form:&#xD;
<div class="square-box">&#xD;
<h4><span class="p"><strong>Syntax:</strong></span></h4>&#xD;
<h4><span class="p">&#xD;
{</span> <span class="nx">field</span><span class="o">:</span> <span class="nx">value</span> <span class="p">}</span></h4>&#xD;
</div>&#xD;
Specify in the sort parameter the field or fields to sort by and a value of 1 or -1 to specify an ascending or descending sort respectively.&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
For example: return all the objects that have an age greater than 25 in descending order by 'name'.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { age: { $gte: 25 } };&#xD;
let sortBy={name:-1}&#xD;
db.collection("week5table").find(query).sort(sortBy).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
and the output:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">[ { _id: 5b76453b8d1d62357cd13bf0, name: 'Max', age: 26 },&#xD;
  { _id: 5b76453b8d1d62357cd13bef, name: 'John', age: 34 },&#xD;
  { _id: 5b76453b8d1d62357cd13bee, name: 'Alex', age: 25 } ]</pre>&#xD;
&#xA0;&#xD;
&#xD;
Another example: sort all the documents in a descending by age and ascending by name&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { age: { $gte: 25 } };&#xD;
let sortBy={age:-1,name:1}&#xD;
db.collection("week5table").find(query).sort(sortBy).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
<h3>Limit the Result</h3>&#xD;
To limit the result in MongoDB, we use the <strong>limit</strong>() method.&#xD;
&#xD;
Example: return the top 5 documents that have age&gt;=25.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">let query = { age: { $gte: 25 } };&#xD;
let sortBy = { age: -1 }&#xD;
db.collection("week5table").find(query).sort(sortBy).limit(5).toArray(function (err, result) {&#xD;
  if (err) throw err;&#xD;
  console.log(result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
<h2>Delete Documents</h2>&#xD;
<strong>&#xC2;&#xA0;collection.deleteOne()</strong> removes a single document from the collection based on the filter (i.e. criteria) .&#xD;
&#xD;
Example: To delete a document that has name='Tim'&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").deleteOne({ name: 'Tim' }, function (err, obj) {&#xD;
  console.log(obj.result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
The return object <strong>obj</strong>&#xC2;&#xA0;contains the number of deleted documents.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">{ n: 1, ok: 1 }</pre>&#xD;
&#xA0;&#xD;
&#xD;
To delete more than one: <strong>collection.deleteMany() </strong>removes multiple documents from the collection based on the filter.&#xD;
&#xD;
Example: To delete all the documents that have age &gt;= 25&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").deleteMany({age: { $gte: 25 }}, function (err, obj) {&#xD;
  console.log(obj.result);&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
the output:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">{ n: 3, ok: 1 }</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
<h2>Update Documents</h2>&#xD;
<strong>collection.updateOne()</strong> updates a single document based on the filter.&#xD;
<div class="square-box">&#xD;
<h4><span class="nx"><strong>Syntax</strong></span></h4>&#xD;
db<span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">updateOne</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">filter</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">update</span><span class="o">&gt;</span><span class="p">,</span> &lt;option&gt; <span class="p">)</span>&#xD;
&#xD;
</div>&#xD;
Where:&#xD;
&#xD;
<strong>filter</strong>: the selection criteria for the update.&#xD;
<p style="padding-left: 30px;">Example: {name:'Tim'}</p>&#xD;
<strong>update</strong>: the modifications to apply.&#xD;
<p style="padding-left: 30px;">we have to use a set of operators to apply the modifications such as <strong>$set</strong> to set a value and <strong>$inc</strong> to increment the value of the field by the specified amount.</p>&#xD;
<p style="padding-left: 30px;">Example: {$set:{age:31}}</p>&#xD;
<p style="padding-left: 30px;">The full list of operators:</p>&#xD;
&#xA0;&#xD;
<table style="width: 1361.84px;"><tbody><tr><td style="width: 308px;"><strong>Name</strong></td>&#xD;
<td style="width: 1052.84px;"><strong>Description</strong></td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$currentDate</strong></td>&#xD;
<td style="width: 1052.84px;">Sets the value of a field to current date, either as a Date or a Timestamp.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$inc</strong></td>&#xD;
<td style="width: 1052.84px;">Increments the value of the field by the specified amount.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$min</strong></td>&#xD;
<td style="width: 1052.84px;">Only updates the field if the specified value is less than the existing field value.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$max</strong></td>&#xD;
<td style="width: 1052.84px;">Only updates the field if the specified value is greater than the existing field value.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$mul</strong></td>&#xD;
<td style="width: 1052.84px;">Multiplies the value of the field by the specified amount.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$rename</strong></td>&#xD;
<td style="width: 1052.84px;">Renames a field.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$set</strong></td>&#xD;
<td style="width: 1052.84px;">Sets the value of a field in a document.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$setOnInsert</strong></td>&#xD;
<td style="width: 1052.84px;">Sets the value of a field if an update results in an insert of a document. Has no effect on update operations that modify existing documents.</td>&#xD;
</tr><tr><td style="width: 308px;"><strong>$unset</strong></td>&#xD;
<td style="width: 1052.84px;">Removes the specified field from a document.</td>&#xD;
</tr></tbody></table>&#xD;
&#xA0;&#xD;
&#xD;
<strong>option</strong>: a set of options to the update method such as upset that creates a new document if no documents match the filter.&#xD;
&#xD;
Example: update the age of a document with <strong>name</strong>='Tim' to be 31.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").updateOne({ name: 'Tim' }, { $set: {age: 31 } }, { upsert: true }, function (err, result) {&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
Example: update the age of a document with <strong>name</strong>='Chris' to be 29. Insert if 'Chris' does not exist.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").updateOne({ name: 'Chirs' }, { $set: { name: 'Chris', age: 29 } }, { upsert: true }, function (err, result) {&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
To update multiple documents, db.collection.updateMany() can be used.&#xD;
&#xD;
Example: increate the field <strong>age</strong>&#xC2;&#xA0;by 2 to all documents with <strong>name</strong> field ends by 'x'&#xD;
&#xD;
&#xA0;&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">db.collection("week5table").updateMany({ name: /x$/ }, { $inc: { age: 2 } }, { upsert: true }, function (err, result) {&#xD;
});</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Now, let's tie all the pieces together.&#xD;
<div class="square-box">&#xD;
&#xD;
Develop an application that represents a simple human resources management system. It should have the following functions:&#xD;
<ul><li>Add a new user, where each user has a name, age, and address</li>&#xD;
 	<li>Delete a user by the name</li>&#xD;
 	<li>Update the user by the name</li>&#xD;
 	<li>List all users</li>&#xD;
</ul>&#xD;
Notes:&#xD;
<ul><li>Data should be saved persistently</li>&#xD;
 	<li>redirect the client to 'list users' after the insert, delete, and update operations.</li>&#xD;
</ul></div>&#xD;
&#xA0;&#xD;
&#xD;
server.js&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">//Import packages&#xD;
const express = require("express");&#xD;
const mongodb = require("mongodb");&#xD;
const morgan = require("morgan");&#xD;
const ejs = require("ejs");&#xD;
//Configure Express&#xD;
const app = express();&#xD;
app.engine("html", ejs.renderFile);&#xD;
app.set("view engine", "html");&#xD;
app.use(express.static("public"));&#xD;
app.use(express.urlencoded({ extended: false }));&#xD;
app.use(morgan("common"));&#xD;
app.listen(8080);&#xD;
//Configure MongoDB&#xD;
const MongoClient = mongodb.MongoClient;&#xD;
// Connection URL&#xD;
const url = "mongodb://localhost:27017/";&#xD;
//reference to the database (i.e. collection)&#xD;
let db;&#xD;
//Connect to mongoDB server&#xD;
MongoClient.connect(url, { useNewUrlParser: true }, function (err, client) {&#xD;
  if (err) {&#xD;
    console.log("Err  ", err);&#xD;
  } else {&#xD;
    console.log("Connected successfully to server");&#xD;
    db = client.db("fit2095db");&#xD;
  }&#xD;
});&#xD;
//Routes Handlers&#xD;
//Insert new User&#xD;
//GET request: send the page to the client&#xD;
app.get("/", function (req, res) {&#xD;
  res.sendFile(__dirname + "/views/index.html");&#xD;
});&#xD;
//POST request: receive the details from the client and insert new document (i.e. object) to the collection (i.e. table)&#xD;
app.post("/addnewuser", function (req, res) {&#xD;
  let userDetails = req.body;&#xD;
  db.collection("users").insertOne({&#xD;
    name: userDetails.uname,&#xD;
    age: userDetails.uage,&#xD;
    address: userDetails.uaddress,&#xD;
  });&#xD;
  res.redirect("/getusers"); // redirect the client to list users page&#xD;
});&#xD;
//List all users&#xD;
//GET request: send the page to the client. Get the list of documents form the collections and send it to the rendering engine&#xD;
app.get("/getusers", function (req, res) {&#xD;
  db.collection("users")&#xD;
    .find({})&#xD;
    .toArray(function (err, data) {&#xD;
      res.render("listusers", { usersDb: data });&#xD;
    });&#xD;
});&#xD;
//Update user:&#xD;
//GET request: send the page to the client&#xD;
app.get("/updateuser", function (req, res) {&#xD;
  res.sendFile(__dirname + "/views/updateuser.html");&#xD;
});&#xD;
//POST request: receive the details from the client and do the update&#xD;
app.post("/updateuserdata", function (req, res) {&#xD;
  let userDetails = req.body;&#xD;
  let filter = { name: userDetails.unameold };&#xD;
  let theUpdate = {&#xD;
    $set: {&#xD;
      name: userDetails.unamenew,&#xD;
      age: userDetails.uagenew,&#xD;
      address: userDetails.uaddressnew,&#xD;
    },&#xD;
  };&#xD;
  db.collection("users").updateOne(filter, theUpdate);&#xD;
  res.redirect("/getusers"); // redirect the client to list users page&#xD;
});&#xD;
//Update User:&#xD;
//GET request: send the page to the client to enter the user's name&#xD;
app.get("/deleteuser", function (req, res) {&#xD;
  res.sendFile(__dirname + "/views/deleteuser.html");&#xD;
});&#xD;
//POST request: receive the user's name and do the delete operation&#xD;
app.post("/deleteuserdata", function (req, res) {&#xD;
  let userDetails = req.body;&#xD;
  let filter = { name: userDetails.uname };&#xD;
  db.collection("users").deleteOne(filter);&#xD;
  res.redirect("/getusers"); // redirect the client to list users page&#xD;
});&#xD;
</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
views/index.html&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="html">&lt;html&gt;&#xD;
&lt;head&gt;&#xD;
        &lt;link rel="stylesheet" href="styles.css"&gt;&#xD;
&lt;/head&gt;&#xD;
&lt;body&gt;&#xD;
    &lt;h1&gt; Insert User&lt;/h1&gt; &lt;/br&gt;&#xD;
    &lt;h1&gt;&#xD;
        &lt;a href="/"&gt;Insert Users&lt;/a&gt;&#xD;
        &lt;a href="/getusers"&gt;List Users&lt;/a&gt;&#xD;
        &lt;a href="/updateuser"&gt;Update User&lt;/a&gt;&#xD;
        &lt;a href="/deleteuser"&gt;Delete User&lt;/a&gt;&#xD;
    &lt;/h1&gt;&#xD;
    &lt;form action="/addnewuser" method="POST"&gt;&#xD;
        User Name &lt;input type="text"  name="uname" /&gt; &lt;/br&gt;&#xD;
        User Age &lt;input type="number"  name="uage" /&gt; &lt;/br&gt;&#xD;
        User Address &lt;input type="text"  name="uaddress" /&gt; &lt;/br&gt;&#xD;
        &lt;input type="submit" value="Submit" /&gt; &lt;/br&gt;&#xD;
    &lt;/form&gt;&#xD;
&lt;/body&gt;&#xD;
&#xD;
&lt;/html&gt;</pre>&#xD;
&#xA0;&#xD;
&#xD;
views/updateuser.html&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="html">&lt;html&gt;&#xD;
        &lt;head&gt;&#xD;
                &lt;link rel="stylesheet" href="styles.css"&gt;&#xD;
        &lt;/head&gt;&#xD;
&lt;body&gt;&#xD;
    &lt;h1&gt;Update User&lt;/h1&gt;&lt;/br&gt;&#xD;
    &lt;h1&gt;&#xD;
        &lt;a href="/"&gt;Insert Users&lt;/a&gt;&#xD;
        &lt;a href="/getusers"&gt;List Users&lt;/a&gt;&#xD;
        &lt;a href="/updateuser"&gt;Update User&lt;/a&gt;&#xD;
        &lt;a href="/deleteuser"&gt;Delete User&lt;/a&gt;&#xD;
    &lt;/h1&gt;&#xD;
&#xD;
    &lt;form action="/updateuserdata" method="POST"&gt;&#xD;
&#xD;
        User Old Name &lt;input type="text"  name="unameold" /&gt; &lt;/br&gt;&#xD;
        User New Name &lt;input type="text"  name="unamenew" /&gt; &lt;/br&gt;&#xD;
        User New Age &lt;input type="number"  name="uagenew" /&gt; &lt;/br&gt;&#xD;
        User New Address &lt;input type="text" name="uaddressnew" /&gt; &lt;/br&gt;&#xD;
        &lt;input type="submit" value="Submit" /&gt; &lt;/br&gt;&#xD;
    &lt;/form&gt;&#xD;
&lt;/body&gt;&#xD;
&#xD;
&lt;/html&gt;</pre>&#xD;
&#xA0;&#xD;
&#xD;
views/deleteuser.html&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="html">&lt;html&gt;&#xD;
&#xD;
&lt;head&gt;&#xD;
    &lt;link rel="stylesheet" href="styles.css"&gt;&#xD;
&lt;/head&gt;&#xD;
&#xD;
&lt;body&gt;&#xD;
    &lt;h1&gt;Delete User&lt;/h1&gt;&lt;/br&gt;&#xD;
    &lt;h1&gt;&#xD;
        &lt;a href="/"&gt;Insert Users&lt;/a&gt;&#xD;
        &lt;a href="/getusers"&gt;List Users&lt;/a&gt;&#xD;
        &lt;a href="/updateuser"&gt;Update User&lt;/a&gt;&#xD;
        &lt;a href="/deleteuser"&gt;Delete User&lt;/a&gt;&#xD;
    &lt;/h1&gt;&#xD;
&#xD;
    &lt;form action="/deleteuserdata" method="POST"&gt;&#xD;
&#xD;
        User name &lt;input type="text"  name="uname" /&gt; &lt;/br&gt;&#xD;
        &lt;input type="submit" value="Submit" /&gt; &lt;/br&gt;&#xD;
    &lt;/form&gt;&#xD;
&lt;/body&gt;&#xD;
&#xD;
&lt;/html&gt;</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
view/listusers.html&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="html">&lt;html&gt;&#xD;
&#xD;
&lt;head&gt;&#xD;
    &lt;head&gt;&#xD;
        &lt;link rel="stylesheet" href="styles.css"&gt;&#xD;
    &lt;/head&gt;&#xD;
&lt;/head&gt;&#xD;
&#xD;
&lt;body&gt;&#xD;
    &lt;h1&gt;List Users&lt;/h1&gt; &lt;/br&gt;&#xD;
    &lt;h1&gt; &lt;a href="/"&gt;Insert Users&lt;/a&gt;&#xD;
        &lt;a href="/getusers"&gt;List Users&lt;/a&gt;&#xD;
        &lt;a href="/updateuser"&gt;Update User&lt;/a&gt;&#xD;
        &lt;a href="/deleteuser"&gt;Delete User&lt;/a&gt;&#xD;
    &lt;/h1&gt;&#xD;
    &lt;table&gt;&#xD;
        &lt;tr&gt;&#xD;
            &lt;td&gt;Name&lt;/td&gt;&#xD;
            &lt;td&gt;Age&lt;/td&gt;&#xD;
            &lt;td&gt;Address&lt;/td&gt;&#xD;
        &lt;/tr&gt;&#xD;
        &lt;% for (let i=0;i&lt;usersDb.length;i++){ %&gt;&#xD;
            &lt;tr&gt;&#xD;
                &lt;td&gt;&lt;%= usersDb[i].name %&gt; &lt;/td&gt;&#xD;
                &lt;td&gt; &lt;%= usersDb[i].age %&gt; &lt;/td&gt;&#xD;
                &lt;td&gt;&lt;%= usersDb[i].address %&gt;&lt;/td&gt;&#xD;
            &lt;/tr&gt;&#xD;
            &lt;%}%&gt;&#xD;
    &lt;/table&gt;&#xD;
&lt;/body&gt;&#xD;
&#xD;
&lt;/html&gt;</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
to run this app:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">npm init --y&#xD;
npm install express ejs mongodb morgan&#xD;
node server.js</pre>&#xD;
&#xA0;&#xD;
&#xD;
Expected Output:&#xD;
&#xD;
Homepage or insert a new user&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/homepage1" rel="attachment wp-att-160737"><img class="alignnone wp-image-160737 size-medium" src="./assets/homepage1-300x163.png" alt="" width="300" height="163"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
List Users&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/getusers" rel="attachment wp-att-160738"><img class="alignnone wp-image-160738 size-medium" src="./assets/getusers-300x154.png" alt="" width="300" height="154"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Delete User&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/deleteuser" rel="attachment wp-att-160739"><img class="alignnone wp-image-160739 size-medium" src="./assets/deleteuser-300x133.png" alt="" width="300" height="133"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Update User&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/udpateuser" rel="attachment wp-att-160740"><img class="alignnone wp-image-160740 size-medium" src="./assets/udpateuser-300x149.png" alt="" width="300" height="149"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Refereces:&#xD;
<ol><li><a href="https://docs.mongodb.com/manual/introduction/">https://docs.mongodb.com/manual/introduction/</a></li>&#xD;
 	<li>Pro MERN Stack,Vasan Subramanian [book]</li>&#xD;
 	<li><a href="https://www.mongodb.com/products/compass">https://www.mongodb.com/products/compass</a></li>&#xD;
</ol></body></html>
