<?xml version="1.0" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div>&#xD;
<div class="square-box">Question: What is HTTP? Does it have methods??</div>&#xD;
<div/>&#xD;
<div>HTTP is a protocol designed to enable communication between clients and servers. It has several methods, such as GET and POST.</div>&#xD;
<ul><li>GET: this method is used to request data from a specified server</li>&#xD;
 	<li>POST: this method is used to send data to a server</li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
&#xD;
More details:&#xC2;&#xA0;&#xC2;&#xA0;<a href="https://www.w3schools.com/tags/ref_httpmethods.asp">https://www.w3schools.com/tags/ref_httpmethods.asp</a>&#xD;
&#xD;
</div>&#xD;
&#xD;
<hr/><div class="square-box">Task1: Write a node.js server that accepts requests from clients and responds with strings:&#xD;
* Respond with "hello FIT2095" when a GET request is made to the homepage&#xD;
* Respond with "my name is Tim" when a GET request is made to '/whatsyourname' path&#xD;
*Respond with "Request not Found" when a GET request is made to anything else</div>&#xD;
<div>server.js</div>&#xD;
<div>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="js">let http = require('http');&#xD;
&#xD;
http.createServer(function (request, response) {&#xD;
&#xD;
    const {&#xD;
        method,&#xD;
        url&#xD;
    } = request; // get the URL and method from the request&#xD;
    console.log(url, method); // print them out&#xD;
    if (url === '/') // if homepage: http://localhost:8080&#xD;
    {&#xD;
        response.writeHead(200); // 200 status code means OK; have a look: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('hello FIT2095');&#xD;
        response.end();&#xD;
    } else if (url === '/whatsyourname') // this is the case when the user navigates to http://localhost:8080/whatsyourname&#xD;
    {&#xD;
        response.writeHead(200); // 200 status code means OK; have a look: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('my name is Tim');&#xD;
        response.end();&#xD;
    }else // for any thing else&#xD;
    {&#xD;
        response.writeHead(404); // 404 status code means Not Found;The requested resource could not be found but may be available in the future. https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('Request not Found');&#xD;
        response.end();&#xD;
    }&#xD;
&#xD;
}).listen(8080);</pre>&#xD;
</div>&#xD;
&#xA0;&#xD;
&#xD;
to run, type this command in your terminal:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">node server.js</pre>&#xD;
&#xA0;&#xD;
&#xD;
<hr/><div class="square-box">&#xD;
&#xD;
Task 2: Write a node.js server that returns the results of the basic arithmetic&#xC2;&#xA0;operations.&#xD;
<ul><li>the four operations are the&#xC2;&#xA0;addition, subtraction, division, and multiplication</li>&#xD;
 	<li>the operation is provided in the pathname of the URL</li>&#xD;
 	<li>the URL contains two parameters&#xC2;&#xA0;represent&#xC2;&#xA0;the two operands of the operation</li>&#xD;
</ul>&#xD;
Example:&#xD;
&#xD;
http://localhost:8080/addition?operand1=11&amp;operand2=23&#xD;
&#xD;
The server has to respond with "the result is 34"&#xD;
&#xD;
</div>&#xD;
<div/>&#xD;
<div>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="js">// task 2&#xD;
let http = require('http');&#xD;
let urlParse = require('url');&#xD;
&#xD;
http.createServer(function (request, response) {&#xD;
&#xD;
    const {method,url} = request; // get the URL and method from the request&#xD;
    // const {url} = request;  &lt;==&gt; const url=request.url;&#xD;
    //const {method}=request &lt;==&gt; const method=request.method;&#xD;
    console.log(url, method); // print them out&#xD;
&#xD;
    let  q = urlParse.parse(url, true).query; // lets parse the query part of the URL&#xD;
    let pathName=urlParse.parse(url, true).pathname; // Now we need to get the path name. i.e. /addition or /subtraction ...&#xD;
    if (pathName === '/') // if homepage: http://localhost:8080&#xD;
    {&#xD;
        response.writeHead(200); // 200 status code means OK; have a look: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('Welcome to my Calculator!!!');&#xD;
        response.end();&#xD;
    } else if (pathName === '/addition') {&#xD;
        console.log('We got addition');&#xD;
        response.writeHead(200);&#xD;
        let result = parseInt(q.operand1) + parseInt(q.operand2);&#xD;
        response.write('the result is ' + result);&#xD;
        response.end();&#xD;
    } else if (pathName === '/subtraction') {&#xD;
        console.log('We got subtraction');&#xD;
        response.writeHead(200);&#xD;
        let result = parseInt(q.operand1) - parseInt(q.operand2);&#xD;
        response.write('the result is ' + result);&#xD;
        response.end();&#xD;
    } else if (pathName === '/division') {&#xD;
        console.log('We got division');&#xD;
        response.writeHead(200);&#xD;
        let result = parseInt(q.operand1) / parseInt(q.operand2);&#xD;
        response.write('the result is ' + result);&#xD;
        response.end();&#xD;
    } else if (pathName === '/multiplication') {&#xD;
        console.log('We got multiplication');&#xD;
        response.writeHead(200);&#xD;
        let result = parseInt(q.operand1) * parseInt(q.operand2);&#xD;
        response.write('the result is ' + result);&#xD;
        response.end();&#xD;
    } else {&#xD;
        console.log('We got Error');&#xD;
        response.writeHead(404); // 404 status code means Not Found;The requested resource could not be found but may be available in the future. https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('Request not Found');&#xD;
        response.end();&#xD;
    }&#xD;
&#xD;
}).listen(8080);</pre>&#xD;
</div>&#xD;
&#xA0;&#xD;
&#xD;
<hr/><div id="supptask3" class="square-box">&#xD;
&#xD;
Task 3: Write a node.js server that returns the results of the basic arithmetic&#xC2;&#xA0;operations.&#xD;
<ul><li>the four operations are the&#xC2;&#xA0;addition, subtraction, division, and multiplication</li>&#xD;
 	<li><span style="text-decoration: underline;"><strong>both operands and the operation should be sent through POST&#xC2;&#xA0;HTTP request&#xC2;&#xA0;</strong></span></li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
&#xD;
</div>&#xD;
&#xA0;&#xD;
<div/>&#xD;
<div>server.js</div>&#xD;
<div>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="js">// task 3&#xD;
let http = require('http');&#xD;
var fs = require('fs');&#xD;
let urlParse = require('url');&#xD;
const {&#xD;
    parse&#xD;
} = require('querystring');&#xD;
&#xD;
&#xD;
&#xD;
http.createServer(function (request, response) {&#xD;
    var filePath = './index.html';&#xD;
    const {&#xD;
        method,&#xD;
        url&#xD;
    } = request; // get the URL and method from the request&#xD;
    // const {url} = request;  &lt;==&gt; const url=request.url;&#xD;
    //const {method}=request &lt;==&gt; const method=request.method;&#xD;
    console.log(url, method); // print them out&#xD;
&#xD;
&#xD;
    let q = urlParse.parse(url, true).query; // lets parse the query part of the URL&#xD;
    let pathName = urlParse.parse(url, true).pathname; // Now we need to get the path name. i.e. /addition or /subtraction ...&#xD;
    if (pathName === '/') // if homepage: http://localhost:8080&#xD;
    {&#xD;
        fs.readFile(filePath, function (error, content) { // send the home page back to the user&#xD;
            // use the fs package to read the file index.html from the local drive&#xD;
            response.writeHead(200, {&#xD;
                'Content-Type': 'text/html'&#xD;
            });&#xD;
            response.end(content, 'utf-8');&#xD;
        });&#xD;
    } else if (pathName === '/calculate') {&#xD;
        console.log('We got post');&#xD;
        &#xD;
        if (request.method === 'POST') {&#xD;
            let body = '';&#xD;
            request.on('data', chunk =&gt; {&#xD;
                body += chunk.toString();&#xD;
            });&#xD;
&#xD;
            request.on('end', () =&gt; {&#xD;
                let items = parse(body); // convert the data into an object. i.e. {operand1=3,operand2=10}&#xD;
                let result = 0;&#xD;
                switch (items.operation) {&#xD;
                    case 'addition':&#xD;
                        result = parseInt(items.operand1) + parseInt(items.operand2);&#xD;
                        break;&#xD;
                    case 'subtraction':&#xD;
                        result = parseInt(items.operand1) - parseInt(items.operand2);&#xD;
                        break;&#xD;
                    case 'division':&#xD;
                        result = parseInt(items.operand1) / parseInt(items.operand2);&#xD;
                        break;&#xD;
                    case 'multiplication':&#xD;
                        result = parseInt(items.operand1) * parseInt(items.operand2);&#xD;
                        break;&#xD;
                    default:&#xD;
                        result = 'Operation is Undefined'&#xD;
&#xD;
                }&#xD;
                response.write('the result is ' + result);&#xD;
                response.end();&#xD;
            });&#xD;
        }&#xD;
&#xD;
    } else {&#xD;
        console.log('We got Error');&#xD;
        response.writeHead(404); // 404 status code means Not Found;The requested resource could not be found but may be available in the future. https://en.wikipedia.org/wiki/List_of_HTTP_status_codes&#xD;
        response.write('Request not Found');&#xD;
        response.end();&#xD;
    }&#xD;
&#xD;
}).listen(8080);</pre>&#xD;
</div>&#xD;
&#xA0;&#xD;
&#xD;
Notes&#xD;
<ul><li>Line 38, registers a callback listener to the 'on data' event. In other words, if new data arrives from this post request, invoke this method.</li>&#xD;
 	<li>Line 38 uses the arrow '=&gt;' notation</li>&#xD;
 	<li>Line 42, register another callback that will get executed at the end of the data.</li>&#xD;
 	<li>Line 43, uses the function 'parse' which is imported from the package&#xC2;&#xA0; 'querystring' (see lines 5-7)</li>&#xD;
 	<li>The output of this function is an object that contains the attributes and their values</li>&#xD;
</ul>&#xD;
&#xA0;&#xD;
&#xD;
index.html&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">&lt;!doctype html&gt;&#xD;
&lt;html&gt;&#xD;
&lt;body&gt;&#xD;
    &lt;form action="/calculate" method="post"&gt;&#xD;
     Operand 1  &lt;input type="number" name="operand1" /&gt;&lt;br /&gt;&#xD;
     Operand 2  &lt;input type="number" name="operand2" /&gt;&lt;br /&gt;&#xD;
     Operation  &lt;input type="text" name="operation" /&gt;&lt;br /&gt;&#xD;
        &lt;button&gt;submit&lt;/button&gt;&#xD;
    &lt;/form&gt;&#xD;
&lt;/body&gt;&#xD;
&lt;/html&gt;</pre>&#xD;
Note:&#xD;
<ul><li>One way to send data to the server using POST request is by using the form and submit button.</li>&#xD;
 	<li>The attribute <strong>action</strong> represents the <strong>pathname</strong></li>&#xD;
 	<li>the attribute method represents the type of the request, which is in this case 'POST'</li>&#xD;
 	<li>The button 'submit submits the data to the server</li>&#xD;
 	<li>The <strong>name&#xC2;&#xA0;</strong>attribute in the input component is the key while the user's input for that input is the value of the pair.</li>&#xD;
</ul>&#xD;
For example:&#xD;
&#xD;
If we have this input:&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/exampleweek2task3" rel="attachment wp-att-159419"><img class="alignnone size-full wp-image-159419" style="border: 1px dashed black;" src="./assets/exampleweek2task3.png" alt="" width="305" height="147"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
the value of&#xC2;&#xA0; variable <strong>body</strong>&#xC2;&#xA0; (line&#xC2;&#xA0;37 @ server.js)&#xC2;&#xA0; will be a string:&#xD;
&#xD;
&#xA0;&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">"operand1=2&amp;operand2=4&amp;operation=addition"</pre>&#xD;
&#xA0;&#xD;
&#xD;
and the value of variable <strong>items</strong>&#xC2;&#xA0;(line&#xC2;&#xA0;43 @ server.js ) will be an object:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="js">{operand1: "2", operand2: "4", operation: "addition"}</pre>&#xD;
&#xA0;&#xD;
<div class="invisible scrollbar horizontal" role="presentation" aria-hidden="true"/>&#xD;
To run task3, you have to install an external package called 'querystring' using the <strong>npm</strong> command:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">npm init&#xD;
npm install querystring --save</pre>&#xD;
Option <strong>--save</strong> will include entry to the list of dependencies in the package.json file&#xD;
&#xD;
Now, let's run our server&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">node server.js</pre>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
<div/>&#xD;
<div/>&#xD;
<div/></body></html>
