<?xml version="1.0" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<?xml version="1.0" standalone="yes"??>
<html><body><h2>How to create and set up a Virtual Machine (VM) on Google Cloud Platform (GCP)?</h2>&#xD;
&#xA0;&#xD;
&#xD;
<video controls width="960" height="540"><source src="./assets/FIT2095-GCP-VM_default.mp4" type="video/mp4"/></video>&#xD;
<h2/>&#xD;
<h2>GitHub: How to push your code to a GCP instance?</h2>&#xD;
<video controls width="1022" height="1080"><source src="./assets/FIT2095-GIT.mp4" type="video/mp4"/></video>&#xD;
<h2>Deployment Workflow</h2>&#xD;
In this unit, we will use a simple deployment workflow that consists of three stages as depicted below. In the first stage, the code of the required application is developed on a local machine. After testing all the functionalities of the system locally, all the files should be pushed to a VCS repository such as GitLab, GitHub, or BitBicket. The GitHub&#xC2;&#xA0;repository works as Intermediary storage between the IDE (local development) and Google Cloud Platform VM instance( production). In the last stage, we will do the following: clone the source code of the project to the VM instance; fetch all the required dependencies (i.e. npm install); build and execute the application.&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/workflow1" rel="attachment wp-att-163483"><img class="wp-image-171420 size-full aligncenter" style="border: 1px dashed black;" src="./assets/workflow1.bmp" alt="" width="821" height="154"/></a>&#xD;
&#xD;
&#xA0;&#xD;
<h2>Cloud Computing Models</h2>&#xD;
Mainly there are three models of Cloud Computing depending on how the infrastructure and source codes are managed.&#xD;
<ul><li>Infrastructure as a Service (IaasS): IaaS&#xC2;&#xA0;is a form of cloud computing that offers virtualized resources over the internet. I this form, you can create your network of resources which can be Virtual Machines (VMs), firewalls, and load balancers.</li>&#xD;
 	<li>Platform as a Service (PassS): PaaS is a form of cloud computing where the infrastructure will be created and managed by the cloud vendor and your responsibility as a developer is to provide the application's source code.</li>&#xD;
 	<li>Software as a Service (SaaS): In this form, both the infrastructure and application source code will be managed by the cloud vendor.</li>&#xD;
</ul><div class="square-box">&#xD;
&#xD;
More Resources:&#xD;
<ul><li><a href="https://aws.amazon.com/types-of-cloud-computing/">https://aws.amazon.com/types-of-cloud-computing/</a></li>&#xD;
 	<li><a href="https://www.ibm.com/cloud/learn/iaas-paas-saas">https://www.ibm.com/cloud/learn/iaas-paas-saas</a></li>&#xD;
</ul></div>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
To create a VM on GCP, push your code to a GitHub&#xC2;&#xA0;repo, and execute your code remotely, follow the following steps.&#xD;
&#xD;
&#xA0;&#xD;
<h2>Step 1:&#xC2;&#xA0;Opt in to Google Apps additional services</h2>&#xD;
Click on the following link and follow the on-screen instruction to opt in to&#xC2;&#xA0;<span style="background-color: #ffcc99;"><strong>Google Apps&#xC2;&#xA0;additional services</strong></span>&#xD;
&#xD;
<a href="https://identity.monash.edu/">https://identity.monash.edu/</a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/screen-shot-2021-08-25-at-8-41-34-am" rel="attachment wp-att-181365"><img class=" wp-image-181365 aligncenter" src="./assets/Screen-Shot-2021-08-25-at-8.41.34-am.png" alt="" width="685" height="515"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
&#xD;
<strong>Note</strong>: It might take 10-60 minutes to activate your account to Google apps&#xD;
&#xD;
</div>&#xD;
<h2>Step 2: Request a Google Cloud Platform coupon</h2>&#xD;
Follow the following instructions to get your&#xC2;&#xA0;GCP coupon.&#xD;
<div class="square-box">&#xD;
<h3><span style="color: #ff0000;"><strong>REMEMBER</strong>: You <span style="text-decoration: underline;">MUST</span> be logged in with your&#xC2;&#xA0; Monash Address to request a GCP coupon.</span></h3>&#xD;
</div>&#xD;
&#xA0;&#xD;
<blockquote>&#xD;
<div>&#xD;
<div>Here is the URL you will need to access in order to request a Google Cloud Platform coupon. You will be asked to provide your school email address and name. An email will be sent to you to confirm these details before a coupon is sent to you.</div>&#xD;
<div><b>&#xC2;&#xA0;</b></div>&#xD;
<div>&#xD;
<blockquote>&#xD;
<div>&#xD;
&#xD;
&#xA0;&#xD;
<table id="m_3845127558782135641topTable" width="500" cellspacing="0" cellpadding="0"><tbody><tr valign="top"><td height="300">&#xD;
<table border="0" width="550" cellspacing="5" cellpadding="5"><tbody><tr valign="top"><td>&#xD;
<table id="m_3845127558782135641topTable" width="500" cellspacing="0" cellpadding="0"><tbody><tr valign="top"><td height="300">&#xD;
<table border="0" width="550" cellspacing="5" cellpadding="5"><tbody><tr valign="top"><td>&#xD;
<div>Here is the URL you will need to access in order to request a Google Cloud coupon. You will be asked to provide your school email address and name. An email will be sent to you to confirm these details before a coupon is sent to you.</div>&#xD;
<div/>&#xD;
<div><span style="font-family: Arial;"><a href="https://gcp.secure.force.com/GCPEDU?cid=YZVUb%2FmqXOJ6NtQ5o1hNZ3VSQica0fRxwVgxXXWARXizXwktEe8zkqmAC2azYgJ3/" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://gcp.secure.force.com/GCPEDU?cid%3DYZVUb%252FmqXOJ6NtQ5o1hNZ3VSQica0fRxwVgxXXWARXizXwktEe8zkqmAC2azYgJ3/&amp;source=gmail&amp;ust=1629931591785000&amp;usg=AFQjCNF0m3gwIB0-h-OPdV_hF5erf8QxpA">Student Coupon Retrieval Link</a></span></div>&#xD;
<div/>&#xD;
<ul><li dir="ltr">&#xD;
<div>You will be asked for a name and email address, which needs to match your school domain. A confirmation email will be sent to you with a coupon code.</div></li>&#xD;
 	<li dir="ltr">&#xD;
<div><span id="m_3845127558782135641docs-internal-guid-9393e5b8-5ee4-3e67-f2bc-8a9b07b02959">You can request a coupon from the URL and redeem it until: 12/13/2021</span></div></li>&#xD;
 	<li dir="ltr">&#xD;
<div><span id="m_3845127558782135641docs-internal-guid-9393e5b8-5ee5-3545-8764-2f5a2987ffe8">Coupon valid through: 8/13/2022</span></div></li>&#xD;
</ul></td>&#xD;
</tr></tbody></table></td>&#xD;
</tr></tbody></table></td>&#xD;
</tr></tbody></table></td>&#xD;
</tr></tbody></table>&#xD;
&#xA0;&#xD;
&#xD;
</div></blockquote>&#xD;
</div>&#xD;
<div><b>&#xC2;&#xA0;</b></div>&#xD;
<div>Contact the role account &lt;fit2095.clayton-x@monash.edu&gt; if you have any questions or issues.</div>&#xD;
&#xA0;&#xD;
&#xD;
</div></blockquote>&#xD;
<div class="square-box">&#xD;
<h3>References</h3>&#xD;
Google Compute Engine Documentation:&#xC2;&#xA0;<a href="https://cloud.google.com/compute/docs/">https://cloud.google.com/compute/docs/</a>&#xD;
&#xD;
Node.js on Google Cloud Platform:&#xC2;&#xA0;<a href="https://cloud.google.com/nodejs/">https://cloud.google.com/nodejs/</a>&#xD;
&#xD;
</div>&#xD;
<h2/>&#xD;
<h2>Step 3: Create a VM Instance</h2>&#xD;
Go to<a href="https://console.cloud.google.com/">&#xC2;&#xA0;https://console.cloud.google.com/</a>&#xD;
&#xD;
From the dashboard, we will create and configure our first instance.&#xD;
<h3>Create a project</h3>&#xD;
From the top left drop menu, select 'New Project'. Provide a name (such as FIT2095Project) and click 'Create'.&#xD;
&#xD;
&#xA0;&#xD;
<h3>Create a Virtual Machine Instance</h3>&#xD;
Open the left panel--&gt;Compute Engine--&gt;VM instances--&gt;Create a new VM&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/120" rel="attachment wp-att-163343"><img class="size-full wp-image-163343 aligncenter" style="border: dashed 1px black;" src="./assets/120.png" alt="" width="484" height="658"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Provide the following details:&#xD;
&#xD;
&#xA0;&#xD;
<table style="width: 2019px;"><thead><tr style="height: 31px;"><th style="width: 33px; height: 31px;">#</th>&#xD;
<th style="width: 258px; height: 31px;">Item</th>&#xD;
<th style="width: 1727px; height: 31px;">Value</th>&#xD;
</tr></thead><tbody><tr style="height: 41px;"><td style="width: 33px; height: 41px;">1</td>&#xD;
<td style="width: 258px; height: 41px;">Name</td>&#xD;
<td style="width: 1727px; height: 41px;">a name for the instance (fit2095 for instance)</td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">2</td>&#xD;
<td style="width: 258px; height: 41px;">Region</td>&#xD;
<td style="width: 1727px; height: 41px;">Melbourne</td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">3</td>&#xD;
<td style="width: 258px; height: 41px;">Zone</td>&#xD;
<td style="width: 1727px; height: 41px;">Default</td>&#xD;
</tr><tr style="height: 43.2656px;"><td style="width: 33px; height: 43.2656px;">4</td>&#xD;
<td style="width: 258px; height: 43.2656px;"><span class="p6n-form-label">Machine type-vCPU</span></td>&#xD;
<td style="width: 1727px; height: 43.2656px;">micro</td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">5</td>&#xD;
<td style="width: 258px; height: 41px;">Machine type-Memory</td>&#xD;
<td style="width: 1727px; height: 41px;">1.0GB</td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">6</td>&#xD;
<td style="width: 258px; height: 41px;">Boot disk</td>&#xD;
<td style="width: 1727px; height: 41px;">Ubuntu 20.04 Minimal</td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">7</td>&#xD;
<td style="width: 258px; height: 41px;">Firewall</td>&#xD;
<td style="width: 1727px; height: 41px;">&#xD;
<p class="p6n-form-note">Set both protocols</p>&#xD;
<label class="p6n-checkbox p6n-checkbox-label" style="box-sizing: border-box; border: 0px; font-family: Roboto, sans-serif; font-style: normal; margin: 8px 0px 0px; outline: 0px; padding: 0px; vertical-align: baseline; font-weight: 400; font-size: 12px; letter-spacing: normal; line-height: 16px; color: #000000; text-transform: none; cursor: default; max-width: 440px; display: inline; position: relative; z-index: auto; transition: z-index 0.75s steps(1, end) 0s; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: start; text-indent: 0px; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial;"><span class="p6n-form-label">Allow HTTP traffic</span></label>&#xD;
&#xD;
<label class="p6n-checkbox p6n-checkbox-label" style="box-sizing: border-box; border: 0px; font-family: Roboto, sans-serif; font-style: normal; margin: 4px 0px 0px; outline: 0px; padding: 0px; vertical-align: baseline; font-weight: 400; font-size: 12px; letter-spacing: normal; line-height: 16px; color: #000000; text-transform: none; cursor: default; max-width: 440px; display: inline; position: relative; z-index: auto; transition: z-index 0.75s steps(1, end) 0s; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: start; text-indent: 0px; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial;"><span class="p6n-form-label">Allow HTTPS traffic</span></label></td>&#xD;
</tr><tr style="height: 41px;"><td style="width: 33px; height: 41px;">8</td>&#xD;
<td style="width: 258px; height: 41px;">Create Button</td>&#xD;
<td style="width: 1727px; height: 41px;">&#xD;
<p class="p6n-form-note">Click</p>&#xD;
</td>&#xD;
</tr></tbody></table><div class="square-box">&#xD;
<h3>CAUTION: Mind your instance monthly cost. You have only 50$ in your credit.</h3>&#xD;
</div>&#xD;
&#xA0;&#xD;
&#xD;
By default, very few ports are open for new instances. Therefore, we have to open 8080 and 4200 or all of them.&#xD;
&#xD;
To do that, open&#xC2;&#xA0;the left panel--&gt;VPC network--&gt;Firewall rules--&gt;Create Firewall Rule and provide the following values&#xD;
<table style="width: 2019px;"><thead><tr><th style="width: 35px;">#</th>&#xD;
<th style="width: 254px;">Item</th>&#xD;
<th style="width: 1729px;">value</th>&#xD;
</tr></thead><tbody><tr><td style="width: 35px;">1</td>&#xD;
<td style="width: 254px;">Name</td>&#xD;
<td style="width: 1729px;">a name for the instance (fit2095rule for instance)</td>&#xD;
</tr><tr><td style="width: 35px;">2</td>&#xD;
<td style="width: 254px;">Target</td>&#xD;
<td style="width: 1729px;">All Instances in the network</td>&#xD;
</tr><tr><td style="width: 35px;">3</td>&#xD;
<td style="width: 254px;">Source IP ranges</td>&#xD;
<td style="width: 1729px;">0.0.0.0/0</td>&#xD;
</tr><tr><td style="width: 35px;">4</td>&#xD;
<td style="width: 254px;">Protocols and Ports</td>&#xD;
<td style="width: 1729px;">Allow</td>&#xD;
</tr><tr><td style="width: 35px;">5</td>&#xD;
<td style="width: 254px;">Create</td>&#xD;
<td style="width: 1729px;">Click</td>&#xD;
</tr></tbody></table><blockquote>Note:&#xC2;&#xA0;0.0.0.0/0 &#xC2;&#xA0;implies all IP addresses.</blockquote>&#xD;
&#xA0;&#xD;
&#xD;
&#xA0;&#xD;
<h2>Step 4:&#xC2;&#xA0; Install the software stack</h2>&#xD;
We have to install the following:&#xD;
<ol><li>Git</li>&#xD;
 	<li>Node.js</li>&#xD;
</ol>&#xD;
&#xA0;&#xD;
&#xD;
Step 1: open your instance page and click on the SSH icon. A new window represents your VM's terminal will appear. To install your stack,&#xC2;&#xA0;execute the following commands sequentially.&#xD;
<h3>Install Git</h3>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">sudo apt update&#xD;
&#xD;
sudo apt install -y git</pre>&#xD;
&#xA0;&#xD;
<h3>Install Node.js &amp; NPM</h3>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -&#xD;
&#xD;
sudo apt-get install -y nodejs&#xD;
</pre>&#xD;
<h3>Install MongoDB</h3>&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">wget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add -&#xD;
&#xD;
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse" | &#xD;
sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list&#xD;
&#xD;
sudo apt-get update&#xD;
&#xD;
sudo apt-get install -y mongodb-org&#xD;
&#xD;
sudo systemctl enable mongod&#xD;
&#xD;
sudo systemctl start mongod</pre>&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
&#xD;
Note: you might need to open port 8080 (or other ports) in your new VM. To do so, watch the above recordings.&#xD;
&#xD;
</div>&#xD;
&#xA0;&#xD;
<h3>Create a GitHub Repository</h3>&#xD;
To signup:&#xC2;&#xA0;<a href="https://github.com/">https://github.com/</a>&#xD;
&#xD;
To create a new repo:&#xC2;&#xA0;<a href="https://github.com/new">https://github.com/new</a>&#xD;
&#xD;
&#xA0;&#xD;
<h3>Push your project to GitHub</h3>&#xD;
open your IDE (VScode) terminal and execute the following commands:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">git init   &#xD;
git remote add origin https://github.com/youraccount/yourrepo.git&#xD;
git pull origin master&#xD;
git add .&#xD;
git commit -m 'initial commit'&#xD;
git push origin master</pre>&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
&#xD;
Note: you might need to key in your GitHub username and access token. The access token can be generated from github.com--&gt;profile--&gt;Settings--&gt;Developer Settings--&gt;Personal access tokens.&#xD;
&#xD;
</div>&#xD;
Return to your GitHub page and refresh and you should see your project files.&#xD;
&#xD;
&#xA0;&#xD;
<h3>Clone GitHub Repository to the VM instance</h3>&#xD;
Open your VM terminal and execute this command:&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="shell">git clone https://github.com/youraccount/yourrepo.git</pre>&#xD;
&#xA0;&#xD;
&#xD;
Now it's time to install the project's dependencies,&#xC2;&#xA0; build components, and run the server.&#xD;
<pre class="EnlighterJSRAW" data-enlighter-language="null">cd project_folder&#xD;
npm install&#xD;
node app.js</pre>&#xD;
&#xA0;&#xD;
&#xD;
keep the terminal alive and go to the GCP instance page and copy the external IP address:&#xD;
&#xD;
<a href="https://www.alexandriarepository.org/media/externalip" rel="attachment wp-att-163477"><img class="size-full wp-image-163477 aligncenter" style="border: 1px dashed black;" src="./assets/externalip.png" alt="" width="1096" height="331"/></a>&#xD;
&#xD;
&#xA0;&#xD;
&#xD;
Open your browser and navigate to http://externalIP:8080 (in my case: http://35.197.180.46:8080)&#xD;
&#xD;
&#xA0;&#xD;
<div class="square-box">&#xD;
<h3>Remember: Stop your VM instance once you are done!!</h3>&#xD;
</div>&#xD;
&#xA0;</body></html>
